extern defgate Rz(double) : gate(1) = "__quantum__qis__rz__body";
extern defgate Rx(double) : gate(1) = "__quantum__qis__rx__body";
extern defgate Ry(double) : gate(1) = "__quantum__qis__ry__body";
extern defgate H() : gate(1) = "__quantum__qis__h__body";
extern defgate X() : gate(1) = "__quantum__qis__x__body";
extern defgate Y() : gate(1) = "__quantum__qis__y__body";
extern defgate Z() : gate(1) = "__quantum__qis__z__body";
defgate CNOT = [1,0,0,0;0,1,0,0;0,0,0,1;0,0,1,0] extern "__quantum__qis__cnot";
procedure CZ(a: qbit, b: qbit) {
    H(b);
    CNOT(a, b);
    H(b);
} deriving gate

procedure main(){
    qbit a,b;
    H(a);
    Rx(1.57, b);
    CZ(a, b);
    ctrl<1> Rz(0.5, a, b);
    return;
}