cmake_minimum_required(VERSION 3.16)
project(quantum_ir)
message(STATUS "QIR")
find_package(LLVM REQUIRED CONFIG)
message(STATUS "Found LLVM ${LLVM_PACKAGE_VERSION}")
message(STATUS "Using LLVMConfig.cmake in: ${LLVM_DIR}")
find_package(MLIR REQUIRED CONFIG)
message(STATUS "Found MLIR ${MLIR_PACKAGE_VERSION}")
message(STATUS "Using MLIRConfig.cmake in: ${MLIR_DIR}")
set(CMAKE_MODULE_PATH ${LLVM_CMAKE_DIR} ${MLIR_CMAKE_DIR})
add_compile_options(-fno-rtti)
include(AddLLVM)
include(TableGen)
include(AddMLIR)
include_directories(${LLVM_INCLUDE_DIRS} ${MLIR_INCLUDE_DIRS} "include")
include_directories(${CMAKE_CURRENT_BINARY_DIR}/include/)
add_subdirectory(include)
add_definitions(${LLVM_DEFINITIONS})
add_executable(main main.cpp)
add_dependencies(main QuantumIRTablegen)
get_property(mlir_libs GLOBAL PROPERTY MLIR_ALL_LIBS)
target_link_libraries(main LLVMCore ${mlir_libs})
set(CMAKE_EXPORT_COMPILE_COMMANDS ON CACHE INTERNAL "")